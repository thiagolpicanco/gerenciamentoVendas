<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets" template="starter.xhtml">

	<style type="text/css">
</style>

	<ui:define name="body">
		<p:dialog widgetVar="dialogProduto" header="Inserir Produto"
			id="dialogProduto" minHeight="600" minWidth="800" height="400"
			width="800">
			<h:form>
				<h:panelGrid columns="4">
					<p:outputLabel value="Nome do Produto" style="margin-right: 10px;" />
					<p:autoComplete value="#{manterVendaMB.filtroProduto.nome}"
						completeMethod="#{manterVendaMB.completaNomeProduto}"></p:autoComplete>

					<p:outputLabel value="Código" style="margin-left: 20px;" />
					<h:inputText value="#{manterVendaMB.filtroProduto.id.codigo}"
						class="form-control" />

					<p:outputLabel value="Fornecedor" />
					<h:selectOneMenu value="#{manterVendaMB.filtroProduto.fornecedor}"
						converter="omnifaces.SelectItemsConverter" class="form-control">
						<f:selectItem itemLabel="Selecione" noSelectionOption="true"></f:selectItem>
						<f:selectItems value="#{manterVendaMB.listaFornecedores}"
							var="for" itemLabel="#{for.nome}" />
					</h:selectOneMenu>

					<p:outputLabel value="Categoria" style="margin-left: 20px;" />
					<h:selectOneMenu value="#{manterVendaMB.filtroProduto.categoria}"
						class="form-control" converter="omnifaces.SelectItemsConverter">
						<f:selectItem itemLabel="Selecione" noSelectionOption="true"></f:selectItem>
						<f:selectItems value="#{manterVendaMB.listaCategorias}"
							var="categoria" itemLabel="#{categoria.noCategoria}"></f:selectItems>

					</h:selectOneMenu>
				</h:panelGrid>
				<p:commandButton value="Buscar Produto"
					action="#{manterVendaMB.buscarProduto()}"
					style="border-top: 40px; position: relative;"
					update="produtoSelecionar" />
				<p:separator></p:separator>

				<h:panelGrid columns="2" style="margin-top: 30px;">

					<p:outputLabel value="Produto: " style="margin-right: 20px;" />
					<h:selectOneMenu style="width: 600px; " id="produtoSelecionar"
						class="form-control" converter="omnifaces.SelectItemsConverter"
						value="#{manterVendaMB.produto}">
						<f:selectItem noSelectionOption="true"
							itemLabel="Selecione o Produto" />
						<f:selectItems value="#{manterVendaMB.listaProdutos}" var="prod"
							itemLabel="Nome: #{prod.nome} | Codigo: #{prod.id.codigo} | Tamanho #{prod.id.tamanho}"></f:selectItems>
						<p:ajax update="dadosProduto" event="change" partialSubmit="true"></p:ajax>
					</h:selectOneMenu>
				</h:panelGrid>
				<p:separator></p:separator>

				<h:panelGrid columns="4" id="dadosProduto">

					<p:outputLabel value="Nome: " style="margin-right: 10px;" />
					<h:inputText disabled="true" value="#{manterVendaMB.produto.nome}" />
					<p:outputLabel value="Código: " />
					<h:inputText disabled="true"
						value="#{manterVendaMB.produto.id.codigo}" />

					<p:outputLabel value="Tamanho: " />
					<h:inputText disabled="true"
						value="#{manterVendaMB.produto.id.tamanho}" />

					<p:outputLabel value="Fornecedor: " />
					<h:inputText disabled="true"
						value="#{manterVendaMB.produto.fornecedor.nome}" />

					<p:outputLabel value="Categoria: " />
					<h:inputText disabled="true"
						value="#{manterVendaMB.produto.categoria.noCategoria}" />

					<p:outputLabel value="Valor: " />
					<h:inputText disabled="true"
						value="#{manterVendaMB.produto.valorVenda}" />


				</h:panelGrid>
				<h:panelGrid columns="2">
					<p:outputLabel value="Descricao: " />
					<h:inputText disabled="true" style="width: 520px;"
						value="#{manterVendaMB.produto.descricao}" />
				</h:panelGrid>




				<h:panelGrid columns="2" style="margin-top: 30px;">
					<p:column>
						<h:panelGrid columns="2" style="margin-right: 356px;">
							<p:outputLabel value="Quantidade: " />
							<p:spinner id="basic" value="#{manterVendaMB.qtdSaida}"
								maxlength="4" size="2" requiredMessage="Campo Obrigatório"
								style="text-align: center;" min="1" />
						</h:panelGrid>
					</p:column>
					<p:column>
						<h:panelGrid columns="4" style=" float: right;">
							<p:commandButton value="Inserir Produto"
								action="#{manterVendaMB.adicionaProdutoVenda()}"
								oncomplete="PF('dialogProduto').hide();"
								update=":principalVenda"></p:commandButton>
							<p:commandButton value="Voltar"
								onclick="PF('dialogProduto').hide();"></p:commandButton>
						</h:panelGrid>
					</p:column>
				</h:panelGrid>
			</h:form>
		</p:dialog>




		<p:dialog widgetVar="dialogCliente" header="Buscar Cliente"
			id="dialogCliente" minHeight="600" minWidth="800" height="400"
			width="800">
			<h:form>
				<h:panelGrid columns="4">
					<p:outputLabel value="Nome do Cliente" style="margin-right: 10px;" />
					<h:inputText value="#{manterVendaMB.filtroCliente.nome}"
						class="form-control" />

					<p:outputLabel value="CPF" style="margin-right: 10px;" />
					<h:inputText value="#{manterVendaMB.filtroCliente.cpfCnpj}"
						class="form-control" />

				</h:panelGrid>
				<p:commandButton value="Buscar Cliente"
					style="border-top: 40px; position: relative;" />
				<p:separator></p:separator>

				<h:panelGrid columns="2" style="margin-top: 30px;">

					<p:outputLabel value="Cliente: " style="margin-right: 20px;" />
					<h:selectOneMenu style="width: 600px; " class="form-control"
						converter="omnifaces.SelectItemsConverter"
						value="#{manterVendaMB.cliente}">
						<f:selectItem itemLabel="Selecione" noSelectionOption="true"></f:selectItem>
						<f:selectItems value="#{manterVendaMB.listaClientes}" var="cli"
							itemLabel="Nome: #{cli.nome} | CPF: #{cli.cpfCnpj}"></f:selectItems>
						<p:ajax update="dadosCliente" event="change" partialSubmit="true"></p:ajax>
					</h:selectOneMenu>
				</h:panelGrid>
				<p:separator></p:separator>

				<h:panelGrid columns="4" id="dadosCliente">
					<p:outputLabel value="Nome: " style="margin-right: 10px;" />
					<h:inputText disabled="true" value="#{manterVendaMB.cliente.nome}" />
					<p:outputLabel value="CPF " />
					<h:inputText disabled="true"
						value="#{manterVendaMB.cliente.cpfCnpj}" />

					<p:outputLabel value="Email: " />
					<h:inputText disabled="true" value="#{manterVendaMB.cliente.email}" />

					<p:outputLabel value="Telefone: " />
					<h:inputText disabled="true"
						value="#{manterVendaMB.cliente.telefone}" />
				</h:panelGrid>

				<h:panelGrid columns="4" style=" float: right;">
					<p:commandButton value="Selecionar Cliente"
						oncomplete="PF('dialogCliente').hide();" update=":principalVenda"></p:commandButton>
					<p:commandButton value="Voltar"
						onclick="PF('dialogCliente').hide();"></p:commandButton>
				</h:panelGrid>
			</h:form>
		</p:dialog>

		<h:form id="principalVenda">
			<div class="box box-primary">
				<div class="box-header with-border"
					style="border-bottom: 15px; margin-top: 15px; text-align: center">
					<h:outputText value="Efetuar Venda"
						style="font-size: 25px; font-weight: 800; margin: 0 auto; width: 50%;" />
				</div>
			</div>
			<p:messages></p:messages>
			<h:panelGrid columns="2">
				<p:commandButton value="Buscar Cliente"
					onclick="PF('dialogCliente').show()"
					style="margin-top: 10px; margin-bottom: 20px;" />
			</h:panelGrid>

			<h:panelGrid columns="4">
				<p:outputLabel value="Nome " style="margin-right: 15px;" />
				<p:inputText disabled="true" value="#{manterVendaMB.cliente.nome}" />

				<p:outputLabel value="CPF "
					style="margin-left: 250px;margin-right: 15px;" />
				<p:inputText disabled="true"
					value="#{manterVendaMB.cliente.cpfCnpj}" />

			</h:panelGrid>

			<p:separator />
			<h:panelGrid>
				<p:commandButton value="Adicionar produto à lista"
					onclick="PF('dialogProduto').show()" />
				<p:outputLabel value=""></p:outputLabel>
				<p:outputLabel value="Lista de Produtos: " style="margin-top: 20px;" />
			</h:panelGrid>
			<p:dataTable id="listaProdutos" var="saida"
				value="#{manterVendaMB.venda.listaProdutos}">


				<p:column>
					<f:facet name="header">
						<p:outputLabel value="Nome" />
					</f:facet>
					<h:outputText value="#{saida.produto.nome}">
					</h:outputText>
				</p:column>

				<p:column>
					<f:facet name="header">
						<p:outputLabel value="Código" />
					</f:facet>
					<h:outputText value="#{saida.produto.id.codigo}">
					</h:outputText>
				</p:column>

				<p:column>
					<f:facet name="header">
						<p:outputLabel value="Tamanho" />
					</f:facet>
					<h:outputText value="#{saida.produto.id.tamanho}">
					</h:outputText>
				</p:column>

				<p:column>
					<f:facet name="header">
						<p:outputLabel value="Qtd" />
					</f:facet>
					<h:outputText value="#{saida.quantidade}">
					</h:outputText>
				</p:column>


			</p:dataTable>
			<p:outputLabel value="Total Venda:  "
				style="margin-top: 80px;margin-right: 10px;" for="total" />
			<p:inputText value="#{manterVendaMB.venda.valorTotal}"
				disabled="true" id="total"></p:inputText>



			<h:panelGrid style="margin-top: 80px; float: right;" columns="2">
				<p:commandButton value="Efetuar Venda" />
				<p:commandButton value="Limpar Campos" />
			</h:panelGrid>



		</h:form>
	</ui:define>

</ui:composition>